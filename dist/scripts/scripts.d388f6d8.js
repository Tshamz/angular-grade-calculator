"use strict";angular.module("gradeCalculatorApp",["ngAnimate","ngRoute","ui.bootstrap"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"scripts/home/home.html",controller:"HomeCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("gradeCalculatorApp").factory("gradeFactory",function(){var a={};return a.scale=[{grade:"A",threshold:.93},{grade:"A-",threshold:.9},{grade:"B+",threshold:.87},{grade:"B",threshold:.83},{grade:"B-",threshold:.8},{grade:"C+",threshold:.77},{grade:"C",threshold:.73},{grade:"C-",threshold:.7},{grade:"D+",threshold:.67},{grade:"D",threshold:.6},{grade:"F",threshold:0}],a.calculateLetterGrade=function(b){for(var c=0;c<a.scale.length;c++)if(b>=a.scale[c].threshold)return a.scale[c].grade},a}),angular.module("gradeCalculatorApp").filter("capitalize",function(){return function(a){for(var b=a.split(" "),c=0;c<b.length;c++)b[c]=b[c].toLowerCase(),b[c]=b[c].charAt(0).toUpperCase()+b[c].substring(1);var d=b.join(" ");return d}}),angular.module("gradeCalculatorApp").filter("percentage",["$window",function(a){return function(b,c,d){return c=angular.isNumber(c)?c:2,d="none"===d?"":"%",a.isNaN(b)?b:Math.round(b*Math.pow(10,c+2))/Math.pow(10,c)+d}}]),angular.module("gradeCalculatorApp").directive("resetfocus",function(){var a={restrict:"A",link:function(a,b){for(var c,d=b.context.elements,e=0;e<d.length;e++){var f=d[e].type;if("email"===f||"number"===f||"text"===f||"url"===f){c=d[e],c.focus();break}}b.on("submit reset",function(){c.focus()})}};return a}),angular.module("gradeCalculatorApp").directive("togglecontenteditable",function(){var a={restrict:"A",link:function(a,b){a.locked&&b.on("click",function(){this.className="toggle-icon glyphicon glyphicon-ok text-success",a.locked=!1})}};return a}),angular.module("gradeCalculatorApp").controller("HomeCtrl",["$scope","$modal",function(a,b){a.openModal=function(a,c){b.open({templateUrl:a,controller:"ModalCtrl",size:c})}}]),angular.module("gradeCalculatorApp").controller("AssignmentsCtrl",["$scope","assignmentsFactory",function(a,b){a.gradedAssignments=b.gradedAssignments;var c={assignment:null,weight:null,score:null};angular.copy(c,a.newRow),a.resetForm=function(){angular.copy(c,a.newRow),a.addAssignment.$setPristine(!0)},a.addRow=function(c){b.addRow(c),a.resetForm()},a.removeRow=function(a){b.removeRow(a)},a.clearAll=function(){b.clearAll()}}]),angular.module("gradeCalculatorApp").factory("assignmentsFactory",["gradeFactory",function(a){var b={},c={earnedPoints:0,possiblePoints:0,rows:0};b.gradedAssignments=[],b.assignmentResults={};var d=function(){var c=0,d=0;angular.forEach(b.gradedAssignments,function(a){c+=a.score*a.weight,d+=a.weight}),b.assignmentResults.earnedPoints=c,b.assignmentResults.possiblePoints=d,b.assignmentResults.weighted=c+" / "+d,b.assignmentResults.percentage=c/d,b.assignmentResults.letter=a.calculateLetterGrade(c/d)};return b.addRow=function(c){c.weight=c.weight/100,c.score=c.score/100,c.grade=a.calculateLetterGrade(c.score),b.gradedAssignments.push(angular.copy(c)),d()},b.removeRow=function(a){b.gradedAssignments.splice(a,1),d()},b.clearAll=function(){b.gradedAssignments=[],angular.copy(c,b.assignmentResults)},b}]),angular.module("gradeCalculatorApp").controller("ResultsCtrl",["$scope","resultsFactory",function(a,b){a.results=b.results;var c={earnedPoints:0,possiblePoints:0,percentage:"N/A",letter:"N/A"};angular.copy(c,a.results)}]),angular.module("gradeCalculatorApp").factory("resultsFactory",["assignmentsFactory",function(a){var b={};return b.results=a.assignmentResults,b}]),angular.module("gradeCalculatorApp").controller("ModalCtrl",["$scope",function(){}]),angular.module("gradeCalculatorApp").controller("ScaleCtrl",["$scope","gradeFactory",function(a,b){a.scale=b.scale,a.locked=!0}]),angular.module("gradeCalculatorApp").controller("Ti83Ctrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.modal"]),angular.module("ui.bootstrap.tpls",["template/modal/backdrop.html","template/modal/window.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1===g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size === \'sm\', \'modal-lg\': size === \'lg\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]);